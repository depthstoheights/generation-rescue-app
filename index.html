<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generation Rescue - Depths to Heights</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --secondary: #a78bfa;
            --accent: #fbbf24;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --light: #f9fafb;
            --dark: #1f2937;
            --gradient1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            opacity: 0.9;
        }

        .bg-animation::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: moveGrid 20s linear infinite;
        }

        @keyframes moveGrid {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        /* Main Container */
        .app-container {
            max-width: 450px;
            margin: 0 auto;
            min-height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 0 40px rgba(0,0,0,0.2);
        }

        /* Header */
        .app-header {
            background: var(--gradient1);
            padding: 20px;
            text-align: center;
            color: white;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .app-header h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .app-header p {
            font-size: 14px;
            opacity: 0.9;
        }

        /* Screen Management */
        .screen {
            display: none;
            padding: 20px;
            animation: fadeInUp 0.5s ease;
            padding-bottom: 80px;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Hook Screen */
        .hook-container {
            padding: 40px 20px;
            text-align: center;
        }

        .family-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: heartbeat 2s infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .hook-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .hook-verse {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(167, 139, 250, 0.1) 100%);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 4px solid var(--primary);
        }

        .hook-verse p {
            font-style: italic;
            color: var(--dark);
            line-height: 1.6;
        }

        .hook-verse cite {
            display: block;
            text-align: right;
            margin-top: 10px;
            color: var(--primary);
            font-weight: 600;
        }

        /* Action Cards */
        .action-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: var(--primary);
        }

        .action-card.urgent {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
            color: white;
        }

        .action-card.parent {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(167, 139, 250, 0.1) 100%);
        }

        .action-card.teen {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(79, 172, 254, 0.1) 100%);
        }

        .action-card.family {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1) 0%, rgba(245, 158, 11, 0.1) 100%);
        }

        .card-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .card-description {
            font-size: 14px;
            color: #6b7280;
            line-height: 1.4;
        }

        /* Prayer Section */
        .prayer-box {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            color: white;
            text-align: center;
        }

        .prayer-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .prayer-text {
            font-size: 16px;
            line-height: 1.8;
            font-style: italic;
        }

        /* Check-in Cards */
        .checkin-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .mood-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #e5e7eb;
        }

        .mood-card:hover {
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .mood-card.selected {
            background: var(--gradient1);
            color: white;
            border-color: var(--primary);
        }

        .mood-emoji {
            font-size: 36px;
            margin-bottom: 8px;
        }

        .mood-label {
            font-size: 14px;
            font-weight: 600;
        }

        /* Devotional Card */
        .devotional-card {
            background: linear-gradient(135deg, rgba(79, 172, 254, 0.1) 0%, rgba(0, 242, 254, 0.1) 100%);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
        }

        .devotional-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .devotional-day {
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 15px;
        }

        .devotional-title {
            flex: 1;
        }

        .devotional-title h3 {
            font-size: 18px;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .devotional-title p {
            font-size: 14px;
            color: #6b7280;
        }

        .devotional-content {
            line-height: 1.8;
            color: var(--dark);
            margin: 15px 0;
        }

        /* Resource List */
        .resource-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }

        .resource-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .resource-icon {
            width: 50px;
            height: 50px;
            background: var(--gradient1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 15px;
        }

        .resource-info {
            flex: 1;
        }

        .resource-info h4 {
            font-size: 16px;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .resource-info p {
            font-size: 13px;
            color: #6b7280;
        }

        /* Emergency Protocol */
        .emergency-section {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            color: white;
        }

        .emergency-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
        }

        .emergency-steps {
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 20px;
            margin-top: 15px;
        }

        .emergency-steps ol {
            padding-left: 20px;
            line-height: 1.8;
        }

        .emergency-steps li {
            margin-bottom: 10px;
        }

        /* Forms */
        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .input-field {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        textarea.input-field {
            resize: vertical;
            min-height: 100px;
        }

        /* Buttons */
        .btn {
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            text-align: center;
            font-family: 'Poppins', sans-serif;
        }

        .btn-primary {
            background: var(--gradient1);
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            color: white;
        }

        .btn-full {
            width: 100%;
            margin: 10px 0;
        }

        /* Progress Tracker */
        .progress-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .progress-title {
            font-weight: 600;
            color: var(--dark);
        }

        .progress-percentage {
            color: var(--primary);
            font-weight: 700;
        }

        .progress-bar {
            background: #e5e7eb;
            height: 10px;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient1);
            border-radius: 10px;
            transition: width 1s ease;
        }

        /* Community Section */
        .community-post {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .post-avatar {
            width: 40px;
            height: 40px;
            background: var(--gradient2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            margin-right: 10px;
        }

        .post-info {
            flex: 1;
        }

        .post-name {
            font-weight: 600;
            color: var(--dark);
        }

        .post-time {
            font-size: 12px;
            color: #6b7280;
        }

        .post-content {
            color: var(--dark);
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .post-actions {
            display: flex;
            gap: 15px;
        }

        .post-action {
            background: none;
            border: none;
            color: #6b7280;
            cursor: pointer;
            font-size: 14px;
            transition: color 0.3s ease;
        }

        .post-action:hover {
            color: var(--primary);
        }

        /* Guidance Content */
        .guidance-content {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .guidance-scripture {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(167, 139, 250, 0.1) 100%);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-style: italic;
            text-align: center;
            color: var(--primary);
            font-weight: 600;
        }

        .guidance-tips {
            margin: 20px 0;
        }

        .guidance-tips h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .guidance-tips ul {
            list-style: none;
            padding: 0;
        }

        .guidance-tips li {
            padding: 10px;
            margin: 10px 0;
            background: #f9fafb;
            border-left: 3px solid var(--primary);
            border-radius: 5px;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 450px;
            background: white;
            padding: 10px;
            display: flex;
            justify-content: space-around;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .nav-item {
            background: none;
            border: none;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #6b7280;
        }

        .nav-item:hover {
            color: var(--primary);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .nav-label {
            font-size: 11px;
            font-weight: 600;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--dark);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 28px;
            color: #6b7280;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--danger);
        }

        /* Audio Toggle */
        .audio-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 101;
            transition: all 0.3s ease;
        }

        .audio-btn:hover {
            transform: scale(1.1);
        }

        .audio-btn.muted {
            background: #e5e7eb;
        }

        /* Tags */
        .tag {
            display: inline-block;
            padding: 5px 12px;
            background: var(--gradient1);
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        .tag.green {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
        }

        .tag.yellow {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
        }

        .tag.red {
            background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
        }

        /* Responsive */
        @media (max-width: 480px) {
            .app-container {
                max-width: 100%;
            }
            
            .checkin-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(99, 102, 241, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Crisis Alert */
        .crisis-alert {
            background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .crisis-alert strong {
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <!-- Background Animation -->
    <div class="bg-animation"></div>

    <!-- Audio Toggle -->
    <div class="audio-btn" id="audioToggle" onclick="toggleAudio()">
        <span id="audioIcon">🔊</span>
    </div>

    <!-- Main App Container -->
    <div class="app-container">
        <!-- App Header -->
        <div class="app-header">
            <h1>Generation Rescue</h1>
            <p>Biblical Support for Teen Mental Health</p>
        </div>

        <!-- Hook Screen -->
        <div class="screen active" id="hookScreen">
            <div class="hook-container">
                <div class="family-icon">👨‍👩‍👧‍👦</div>
                <h2 class="hook-title">Your Family Is Not Alone</h2>
                <div class="hook-verse">
                    <p>"Train up a child in the way he should go; even when he is old he will not depart from it."</p>
                    <cite>- Proverbs 22:6</cite>
                </div>
                
                <button class="btn btn-primary btn-full" onclick="showScreen('userSelect')">
                    Begin Your Journey
                </button>
                
                <button class="btn btn-warning btn-full" onclick="showScreen('emergency')">
                    ⚠️ Teen in Crisis Now
                </button>
            </div>
        </div>

        <!-- User Selection Screen -->
        <div class="screen" id="userSelect">
            <h2 style="text-align: center; margin-bottom: 30px; color: var(--primary);">Who are you?</h2>
            
            <div class="action-card parent" onclick="setUser('parent'); showScreen('parentHome')">
                <div class="card-icon">👨‍👩‍👧</div>
                <div class="card-title">I'm a Parent</div>
                <div class="card-description">Access resources, prayers, and support for your teen</div>
            </div>

            <div class="action-card teen" onclick="setUser('teen'); showScreen('teenHome')">
                <div class="card-icon">🧑‍🎓</div>
                <div class="card-title">I'm a Teen</div>
                <div class="card-description">Find help, hope, and your identity in Christ</div>
            </div>

            <div class="action-card family" onclick="setUser('family'); showScreen('familyHome')">
                <div class="card-icon">👨‍👩‍👧‍👦</div>
                <div class="card-title">Family Together</div>
                <div class="card-description">Work through challenges as a united family</div>
            </div>
        </div>

        <!-- Parent Home Screen -->
        <div class="screen" id="parentHome">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Parent Dashboard</h2>
            
            <div class="prayer-box" id="dailyPrayerParent">
                <div class="prayer-title">Today's Parent Prayer Armor</div>
                <div class="prayer-text">
                    "Lord, give me wisdom beyond my own understanding. Help me see my teen through Your eyes. Grant me patience when I'm frustrated, love when I'm hurt, and faith when I'm afraid. Equip me to be the parent You've called me to be. Amen."
                </div>
            </div>

            <div class="action-card" onclick="showScreen('parentGuidance')">
                <div class="card-icon">📖</div>
                <div class="card-title">Biblical Parenting Guidance</div>
                <div class="card-description">Scriptural wisdom for specific challenges</div>
            </div>

            <div class="action-card" onclick="showScreen('teenCheck')">
                <div class="card-icon">💬</div>
                <div class="card-title">Teen Check-In Tools</div>
                <div class="card-description">Conversation starters and assessment helps</div>
            </div>

            <div class="action-card" onclick="showScreen('community')">
                <div class="card-icon">🤝</div>
                <div class="card-title">Parent Community</div>
                <div class="card-description">Connect with other Christian parents</div>
            </div>

            <div class="action-card" onclick="showScreen('resources')">
                <div class="card-icon">📚</div>
                <div class="card-title">Professional Resources</div>
                <div class="card-description">Find counselors and youth pastors</div>
            </div>
        </div>

        <!-- Teen Home Screen -->
        <div class="screen" id="teenHome">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--success);">Hey There! 👋</h2>
            
            <div class="devotional-card">
                <div class="devotional-header">
                    <div class="devotional-day">💚</div>
                    <div class="devotional-title">
                        <h3>You Matter More Than You Know</h3>
                        <p>God sees you. He knows you. He loves you.</p>
                    </div>
                </div>
            </div>

            <h3 style="margin: 20px 0; color: var(--dark);">How are you feeling today?</h3>
            <div class="checkin-grid">
                <div class="mood-card" onclick="selectMood('great', this)">
                    <div class="mood-emoji">😊</div>
                    <div class="mood-label">Great</div>
                </div>
                <div class="mood-card" onclick="selectMood('okay', this)">
                    <div class="mood-emoji">😐</div>
                    <div class="mood-label">Okay</div>
                </div>
                <div class="mood-card" onclick="selectMood('struggling', this)">
                    <div class="mood-emoji">😔</div>
                    <div class="mood-label">Struggling</div>
                </div>
                <div class="mood-card" onclick="selectMood('help', this)">
                    <div class="mood-emoji">🆘</div>
                    <div class="mood-label">Need Help</div>
                </div>
            </div>

            <div class="action-card teen" onclick="showScreen('teenIdentity')">
                <div class="card-icon">✨</div>
                <div class="card-title">Who God Says You Are</div>
                <div class="card-description">Discover your true identity in Christ</div>
            </div>

            <div class="action-card teen" onclick="showScreen('teenCoping')">
                <div class="card-icon">🛡️</div>
                <div class="card-title">Coping Skills</div>
                <div class="card-description">Biblical tools for tough times</div>
            </div>

            <div class="action-card teen" onclick="showScreen('teenTalk')">
                <div class="card-icon">💬</div>
                <div class="card-title">Need to Talk?</div>
                <div class="card-description">Safe places to get help</div>
            </div>
        </div>

        <!-- Family Home Screen -->
        <div class="screen" id="familyHome">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--accent);">Family Unity Center</h2>
            
            <div class="devotional-card">
                <div class="devotional-header">
                    <div class="devotional-day" id="devotionalDay">1</div>
                    <div class="devotional-title">
                        <h3>30-Day Family Healing Journey</h3>
                        <p id="devotionalTitle">Day 1: Building Trust Through Truth</p>
                    </div>
                </div>
                <p class="devotional-content" id="devotionalContent">
                    Today we begin with honesty. Each family member shares one thing they're grateful for and one thing they're struggling with. No judgment, just listening. Read together: Ephesians 4:15 - "Speaking the truth in love."
                </p>
                <button class="btn btn-primary" style="margin-top: 15px;" onclick="showScreen('familyDevotional')">
                    Start Today's Devotional
                </button>
            </div>

            <div class="progress-container">
                <div class="progress-header">
                    <span class="progress-title">Family Healing Progress</span>
                    <span class="progress-percentage" id="progressPercent">3%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 3%;"></div>
                </div>
            </div>

            <div class="action-card family" onclick="showScreen('familyActivities')">
                <div class="card-icon">🎯</div>
                <div class="card-title">Family Activities</div>
                <div class="card-description">Bonding exercises that build trust</div>
            </div>

            <div class="action-card family" onclick="showScreen('familyPrayer')">
                <div class="card-icon">🙏</div>
                <div class="card-title">Pray Together</div>
                <div class="card-description">Guided family prayer sessions</div>
            </div>
        </div>

        <!-- Parent Guidance Screen -->
        <div class="screen" id="parentGuidance">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Biblical Guidance</h2>
            
            <h3 style="margin-bottom: 15px;">What are you dealing with?</h3>
            
            <div class="action-card" onclick="showGuidanceDetail('anxiety')">
                <div class="card-icon">😰</div>
                <div class="card-title">Teen Anxiety</div>
                <div class="card-description">Biblical approach to anxiety and worry</div>
            </div>

            <div class="action-card" onclick="showGuidanceDetail('depression')">
                <div class="card-icon">😢</div>
                <div class="card-title">Teen Depression</div>
                <div class="card-description">Supporting through the valley</div>
            </div>

            <div class="action-card" onclick="showGuidanceDetail('selfharm')">
                <div class="card-icon">💔</div>
                <div class="card-title">Self-Harm</div>
                <div class="card-description">Responding with love and wisdom</div>
            </div>

            <div class="action-card" onclick="showGuidanceDetail('rebellion')">
                <div class="card-icon">😤</div>
                <div class="card-title">Rebellion & Anger</div>
                <div class="card-description">Setting boundaries with grace</div>
            </div>

            <div class="action-card" onclick="showGuidanceDetail('addiction')">
                <div class="card-icon">⛓️</div>
                <div class="card-title">Addiction Issues</div>
                <div class="card-description">Breaking chains through Christ</div>
            </div>
        </div>

        <!-- Guidance Detail Screen -->
        <div class="screen" id="guidanceDetail">
            <div class="guidance-content">
                <h2 id="guidanceTitle" style="color: var(--primary); margin-bottom: 20px;"></h2>
                <div class="guidance-scripture" id="guidanceScripture"></div>
                <div class="guidance-tips">
                    <h4>Biblical Action Steps:</h4>
                    <ul id="guidanceTips"></ul>
                </div>
                <div class="guidance-tips">
                    <h4>Prayer Focus:</h4>
                    <p id="guidancePrayer" style="font-style: italic; padding: 15px; background: #f9fafb; border-radius: 10px;"></p>
                </div>
                <button class="btn btn-secondary btn-full" onclick="showScreen('parentGuidance')">
                    Back to Guidance Topics
                </button>
            </div>
        </div>

        <!-- Teen Identity Screen -->
        <div class="screen" id="teenIdentity">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--success);">Who God Says You Are</h2>
            
            <div class="devotional-card">
                <p style="font-size: 18px; text-align: center; line-height: 1.8;">
                    You are <span class="tag green">LOVED</span><br>
                    You are <span class="tag green">CHOSEN</span><br>
                    You are <span class="tag green">FORGIVEN</span><br>
                    You are <span class="tag green">VALUABLE</span><br>
                    You are <span class="tag green">PURPOSEFUL</span><br>
                    You are <span class="tag green">NEVER ALONE</span>
                </p>
            </div>

            <div class="prayer-box">
                <div class="prayer-title">Your Identity Verses</div>
                <div class="prayer-text">
                    "I am fearfully and wonderfully made" - Psalm 139:14<br><br>
                    "I am a new creation in Christ" - 2 Corinthians 5:17<br><br>
                    "I am God's masterpiece" - Ephesians 2:10<br><br>
                    "I can do all things through Christ" - Philippians 4:13<br><br>
                    "Nothing can separate me from God's love" - Romans 8:38-39
                </div>
            </div>

            <button class="btn btn-primary btn-full" onclick="showScreen('teenHome')">
                Back to Dashboard
            </button>
        </div>

        <!-- Teen Coping Screen -->
        <div class="screen" id="teenCoping">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--success);">Biblical Coping Skills</h2>
            
            <div class="guidance-content">
                <h3 style="color: var(--primary); margin-bottom: 15px;">When Anxiety Hits</h3>
                <div class="guidance-tips">
                    <ul>
                        <li>🌬️ Box Breathing: Breathe in 4, hold 4, out 4, hold 4 - repeat with "Lord, calm my storm"</li>
                        <li>📝 Write it out: Journal your fears, then write God's promises next to each one</li>
                        <li>🎵 Worship playlist: Create a playlist of songs that remind you of God's peace</li>
                        <li>🚶 Prayer walk: Take a walk and tell God everything you're worried about</li>
                    </ul>
                </div>
            </div>

            <div class="guidance-content">
                <h3 style="color: var(--primary); margin-bottom: 15px;">When You're Angry</h3>
                <div class="guidance-tips">
                    <ul>
                        <li>⏸️ Pause and pray: Count to 10 while saying "God, help me respond, not react"</li>
                        <li>💪 Physical release: Do pushups, run, or punch a pillow (safely release energy)</li>
                        <li>🎨 Create something: Draw, write, or make music to express feelings</li>
                        <li>💬 Talk it out: Find a trusted adult who will listen without judging</li>
                    </ul>
                </div>
            </div>

            <div class="guidance-content">
                <h3 style="color: var(--primary); margin-bottom: 15px;">When You're Sad</h3>
                <div class="guidance-tips">
                    <ul>
                        <li>😢 Let yourself cry: Jesus wept too - tears are healing</li>
                        <li>☀️ Get sunlight: Go outside, even for 5 minutes</li>
                        <li>🤗 Seek connection: Text a friend, hug a family member</li>
                        <li>🙏 Lament prayers: Tell God exactly how you feel - He can handle it</li>
                    </ul>
                </div>
            </div>

            <button class="btn btn-primary btn-full" onclick="showScreen('teenHome')">
                Back to Dashboard
            </button>
        </div>

        <!-- Teen Talk Screen -->
        <div class="screen" id="teenTalk">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--success);">Safe People to Talk To</h2>
            
            <div class="resource-item">
                <div class="resource-icon">👨‍👩‍👧</div>
                <div class="resource-info">
                    <h4>Your Parents</h4>
                    <p>They love you more than you know. Try: "I need to talk about something hard"</p>
                </div>
            </div>

            <div class="resource-item">
                <div class="resource-icon">⛪</div>
                <div class="resource-info">
                    <h4>Youth Pastor</h4>
                    <p>Trained to help teens navigate tough times with faith</p>
                </div>
            </div>

            <div class="resource-item">
                <div class="resource-icon">🏫</div>
                <div class="resource-info">
                    <h4>School Counselor</h4>
                    <p>Professional help available at your school</p>
                </div>
            </div>

            <div class="resource-item">
                <div class="resource-icon">📱</div>
                <div class="resource-info">
                    <h4>Crisis Text Line</h4>
                    <p>Text HOME to 741741 for 24/7 support</p>
                </div>
            </div>

            <div class="resource-item">
                <div class="resource-icon">👨‍⚕️</div>
                <div class="resource-info">
                    <h4>Christian Counselor</h4>
                    <p>Professional therapy with biblical foundation</p>
                </div>
            </div>

            <div class="crisis-alert">
                <strong>Remember:</strong>
                Asking for help is BRAVE, not weak. God often sends help through other people.
            </div>

            <button class="btn btn-primary btn-full" onclick="showScreen('teenHome')">
                Back to Dashboard
            </button>
        </div>

        <!-- Emergency Protocol Screen -->
        <div class="screen" id="emergency">
            <div class="emergency-section">
                <div class="emergency-title">⚠️ TEEN CRISIS PROTOCOL ⚠️</div>
                
                <div class="emergency-steps">
                    <h3>Immediate Steps:</h3>
                    <ol>
                        <li><strong>PRAY:</strong> "Lord, give me wisdom and peace right now."</li>
                        <li><strong>ENSURE SAFETY:</strong> Remove any means of harm</li>
                        <li><strong>STAY CALM:</strong> Your peace will help them</li>
                        <li><strong>LISTEN:</strong> Don't judge, just be present</li>
                        <li><strong>GET HELP:</strong> Call professionals if needed</li>
                    </ol>
                </div>
            </div>

            <div class="crisis-alert">
                <strong>Crisis Hotline</strong>
                Contact your local emergency services or crisis helpline immediately
            </div>

            <div class="guidance-content">
                <h3 style="color: var(--danger);">Warning Signs Requiring Immediate Action:</h3>
                <ul style="line-height: 2;">
                    <li>Talking about wanting to die or kill themselves</li>
                    <li>Looking for ways to kill themselves</li>
                    <li>Talking about feeling hopeless or having no purpose</li>
                    <li>Talking about feeling trapped or in unbearable pain</li>
                    <li>Talking about being a burden to others</li>
                    <li>Increasing use of alcohol or drugs</li>
                    <li>Withdrawing from activities and isolating from family/friends</li>
                    <li>Showing rage or talking about seeking revenge</li>
                    <li>Displaying extreme mood swings</li>
                </ul>
            </div>

            <button class="btn btn-warning btn-full" onclick="showScreen('emergencyContacts')">
                📞 Emergency Contacts
            </button>

            <button class="btn btn-secondary btn-full" onclick="navigateHome()">
                Return to Dashboard
            </button>
        </div>

        <!-- Emergency Contacts Screen -->
        <div class="screen" id="emergencyContacts">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--danger);">Emergency Contacts</h2>
            
            <div class="crisis-alert">
                <strong>IMMEDIATE DANGER</strong>
                Call your local emergency number (911 in US)
            </div>

            <div class="resource-item">
                <div class="resource-icon">📞</div>
                <div class="resource-info">
                    <h4>National Suicide Prevention Lifeline</h4>
                    <p>988 or 1-800-273-8255 (24/7)</p>
                </div>
            </div>

            <div class="resource-item">
                <div class="resource-icon">💬</div>
                <div class="resource-info">
                    <h4>Crisis Text Line</h4>
                    <p>Text HOME to 741741</p>
                </div>
            </div>

            <div class="resource-item">
                <div class="resource-icon">🏥</div>
                <div class="resource-info">
                    <h4>Local Hospital Emergency Room</h4>
                    <p>Go immediately if in danger</p>
                </div>
            </div>

            <div class="resource-item">
                <div class="resource-icon">⛪</div>
                <div class="resource-info">
                    <h4>Pastor Emergency Line</h4>
                    <p>Many churches have 24/7 pastoral support</p>
                </div>
            </div>

            <button class="btn btn-secondary btn-full" onclick="showScreen('emergency')">
                Back to Crisis Protocol
            </button>
        </div>

        <!-- Community Screen -->
        <div class="screen" id="community">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Parent Community</h2>
            
            <div class="community-post">
                <div class="post-header">
                    <div class="post-avatar">SM</div>
                    <div class="post-info">
                        <div class="post-name">Sarah M.</div>
                        <div class="post-time">2 hours ago</div>
                    </div>
                </div>
                <div class="post-content">
                    My 15-year-old finally opened up about their anxiety. We're starting counseling next week. Prayers appreciated! God is faithful. 🙏
                </div>
                <div class="post-actions">
                    <button class="post-action" onclick="prayForPost()">🙏 Pray</button>
                    <button class="post-action" onclick="commentOnPost()">💬 Comment</button>
                    <button class="post-action" onclick="supportPost()">❤️ Support</button>
                </div>
            </div>

            <div class="community-post">
                <div class="post-header">
                    <div class="post-avatar">JD</div>
                    <div class="post-info">
                        <div class="post-name">John D.</div>
                        <div class="post-time">1 day ago</div>
                    </div>
                </div>
                <div class="post-content">
                    Breakthrough! After months of prayer and patience, my son is engaging in family devotionals again. Don't give up, parents!
                </div>
                <div class="post-actions">
                    <button class="post-action" onclick="prayForPost()">🙏 Pray</button>
                    <button class="post-action" onclick="commentOnPost()">💬 Comment</button>
                    <button class="post-action" onclick="supportPost()">❤️ Support</button>
                </div>
            </div>

            <div class="community-post">
                <div class="post-header">
                    <div class="post-avatar">RW</div>
                    <div class="post-info">
                        <div class="post-name">Rebecca W.</div>
                        <div class="post-time">3 days ago</div>
                    </div>
                </div>
                <div class="post-content">
                    Found my daughter self-harming. Heart is broken but trusting God. Meeting with youth pastor tomorrow. Please pray for wisdom.
                </div>
                <div class="post-actions">
                    <button class="post-action" onclick="prayForPost()">🙏 Pray</button>
                    <button class="post-action" onclick="commentOnPost()">💬 Comment</button>
                    <button class="post-action" onclick="supportPost()">❤️ Support</button>
                </div>
            </div>

            <button class="btn btn-primary btn-full" onclick="showNewPost()">
                ✏️ Share Your Story
            </button>
        </div>

        <!-- Resources Screen -->
        <div class="screen" id="resources">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Professional Resources</h2>
            
            <div class="resource-item" onclick="showScreen('counselorDirectory')">
                <div class="resource-icon">🧠</div>
                <div class="resource-info">
                    <h4>Christian Counselors</h4>
                    <p>Find licensed therapists who integrate faith</p>
                </div>
            </div>

            <div class="resource-item" onclick="showScreen('youthPastors')">
                <div class="resource-icon">⛪</div>
                <div class="resource-info">
                    <h4>Youth Pastors</h4>
                    <p>Connect with trained youth ministers</p>
                </div>
            </div>

            <div class="resource-item" onclick="showScreen('treatmentPrograms')">
                <div class="resource-icon">🏥</div>
                <div class="resource-info">
                    <h4>Treatment Programs</h4>
                    <p>Faith-based recovery and support programs</p>
                </div>
            </div>

            <div class="resource-item" onclick="showScreen('bookResources')">
                <div class="resource-icon">📚</div>
                <div class="resource-info">
                    <h4>Recommended Books</h4>
                    <p>Biblical resources for teen mental health</p>
                </div>
            </div>

            <div class="resource-item" onclick="showScreen('onlineSupport')">
                <div class="resource-icon">💻</div>
                <div class="resource-info">
                    <h4>Online Support</h4>
                    <p>Virtual counseling and support groups</p>
                </div>
            </div>
        </div>

        <!-- Counselor Directory Screen -->
        <div class="screen" id="counselorDirectory">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Christian Counselor Directory</h2>
            
            <div class="guidance-content">
                <h3>Finding the Right Counselor</h3>
                <p style="line-height: 1.8; margin: 15px 0;">Look for counselors who are:</p>
                <ul style="line-height: 2;">
                    <li>Licensed in your state</li>
                    <li>Experienced with teen/adolescent therapy</li>
                    <li>Integrate biblical principles with evidence-based treatment</li>
                    <li>Specialize in your teen's specific struggles</li>
                </ul>
            </div>

            <div class="guidance-content">
                <h3>Questions to Ask:</h3>
                <ul style="line-height: 2;">
                    <li>"How do you integrate faith into therapy?"</li>
                    <li>"What's your experience with teen depression/anxiety?"</li>
                    <li>"Do you involve parents in the treatment process?"</li>
                    <li>"What therapeutic approaches do you use?"</li>
                    <li>"Do you offer crisis support between sessions?"</li>
                </ul>
            </div>

            <div class="guidance-content">
                <h3>Resources to Find Counselors:</h3>
                <ul style="line-height: 2;">
                    <li><strong>American Association of Christian Counselors</strong> - aacc.net</li>
                    <li><strong>Focus on the Family Counseling</strong> - focusonthefamily.com</li>
                    <li><strong>Psychology Today</strong> - Filter for Christian counselors</li>
                    <li><strong>Your Church</strong> - Ask for referrals</li>
                    <li><strong>Insurance Provider</strong> - Check covered therapists</li>
                </ul>
            </div>

            <button class="btn btn-secondary btn-full" onclick="showScreen('resources')">
                Back to Resources
            </button>
        </div>

        <!-- Book Resources Screen -->
        <div class="screen" id="bookResources">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Recommended Books</h2>
            
            <div class="guidance-content">
                <h3>For Parents:</h3>
                <ul style="line-height: 2;">
                    <li><strong>"Age of Opportunity"</strong> by Paul David Tripp</li>
                    <li><strong>"The Anxious Teen"</strong> by Sheila Walsh</li>
                    <li><strong>"Parenting Teens with Love and Logic"</strong> by Foster Cline</li>
                    <li><strong>"Get Out of My Life"</strong> by Anthony Wolf</li>
                    <li><strong>"Running on Empty"</strong> by Jonice Webb</li>
                </ul>
            </div>

            <div class="guidance-content">
                <h3>For Teens:</h3>
                <ul style="line-height: 2;">
                    <li><strong>"Anxious for Nothing (Teen Edition)"</strong> by Max Lucado</li>
                    <li><strong>"Uninvited"</strong> by Lysa TerKeurst</li>
                    <li><strong>"Battlefield of the Mind for Teens"</strong> by Joyce Meyer</li>
                    <li><strong>"You Are Loved"</strong> by Sally Lloyd-Jones</li>
                    <li><strong>"Lies Young Women Believe"</strong> by Nancy DeMoss</li>
                </ul>
            </div>

            <div class="guidance-content">
                <h3>For Family Study:</h3>
                <ul style="line-height: 2;">
                    <li><strong>"The Five Love Languages of Teenagers"</strong> by Gary Chapman</li>
                    <li><strong>"Sticky Faith"</strong> by Kara Powell</li>
                    <li><strong>"Tech-Wise Family"</strong> by Andy Crouch</li>
                    <li><strong>"Growing Up Social"</strong> by Gary Chapman</li>
                </ul>
            </div>

            <button class="btn btn-secondary btn-full" onclick="showScreen('resources')">
                Back to Resources
            </button>
        </div>

        <!-- Teen Check-In Screen -->
        <div class="screen" id="teenCheck">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Teen Check-In Guide</h2>
            
            <div class="devotional-card">
                <h3 style="margin-bottom: 15px;">Conversation Starters</h3>
                <ul style="line-height: 2; padding-left: 20px;">
                    <li>"What's been the best part of your week?"</li>
                    <li>"Is there anything weighing on your heart?"</li>
                    <li>"How can I pray for you specifically?"</li>
                    <li>"What's one thing I could do to support you better?"</li>
                    <li>"Have you felt God's presence lately?"</li>
                    <li>"What's been hardest for you recently?"</li>
                    <li>"Who in your friend group encourages your faith?"</li>
                    <li>"What would make you feel more understood?"</li>
                </ul>
            </div>

            <div class="prayer-box">
                <div class="prayer-title">Warning Signs to Watch</div>
                <div style="text-align: left;">
                    <span class="tag red">Isolation from friends/family</span>
                    <span class="tag red">Dramatic sleep changes</span>
                    <span class="tag red">Severe mood swings</span>
                    <span class="tag red">Academic decline</span>
                    <span class="tag red">Loss of interest in activities</span>
                    <span class="tag red">Substance use</span>
                    <span class="tag red">Self-harm signs</span>
                    <span class="tag red">Giving away possessions</span>
                    <span class="tag red">Talking about death</span>
                </div>
            </div>

            <button class="btn btn-primary btn-full" onclick="showScreen('assessmentTool')">
                Start Assessment Tool
            </button>

            <button class="btn btn-secondary btn-full" onclick="showScreen('parentHome')">
                Back to Dashboard
            </button>
        </div>

        <!-- Assessment Tool Screen -->
        <div class="screen" id="assessmentTool">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Teen Wellness Assessment</h2>
            
            <div class="guidance-content">
                <p style="margin-bottom: 20px;">Answer these questions about your teen's behavior over the past 2 weeks:</p>
                
                <div class="input-group">
                    <label class="input-label">
                        <input type="checkbox" id="assess1"> Shows little interest in activities they used to enjoy
                    </label>
                </div>
                
                <div class="input-group">
                    <label class="input-label">
                        <input type="checkbox" id="assess2"> Expresses feelings of hopelessness or worthlessness
                    </label>
                </div>
                
                <div class="input-group">
                    <label class="input-label">
                        <input type="checkbox" id="assess3"> Has trouble sleeping or sleeps too much
                    </label>
                </div>
                
                <div class="input-group">
                    <label class="input-label">
                        <input type="checkbox" id="assess4"> Shows significant changes in appetite or weight
                    </label>
                </div>
                
                <div class="input-group">
                    <label class="input-label">
                        <input type="checkbox" id="assess5"> Isolates from friends and family
                    </label>
                </div>
                
                <div class="input-group">
                    <label class="input-label">
                        <input type="checkbox" id="assess6"> Displays excessive worry or anxiety
                    </label>
                </div>
                
                <div class="input-group">
                    <label class="input-label">
                        <input type="checkbox" id="assess7"> Has angry outbursts or irritability
                    </label>
                </div>
                
                <div class="input-group">
                    <label class="input-label">
                        <input type="checkbox" id="assess8"> Talks about death or suicide
                    </label>
                </div>
                
                <button class="btn btn-primary btn-full" onclick="calculateAssessment()">
                    Get Results
                </button>
            </div>

            <div id="assessmentResults" style="display: none;">
                <div class="crisis-alert" id="assessmentAlert">
                    <strong>Assessment Results</strong>
                    <p id="assessmentMessage"></p>
                </div>
            </div>

            <button class="btn btn-secondary btn-full" onclick="showScreen('teenCheck')">
                Back to Check-In Guide
            </button>
        </div>

        <!-- Family Devotional Screen -->
        <div class="screen" id="familyDevotional">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--accent);">Today's Family Devotional</h2>
            
            <div class="devotional-card">
                <div class="devotional-header">
                    <div class="devotional-day" id="devDay">1</div>
                    <div class="devotional-title">
                        <h3 id="devTitle">Building Trust Through Truth</h3>
                        <p id="devVerse">Ephesians 4:15</p>
                    </div>
                </div>
                <div class="devotional-content" id="devContent">
                    <p><strong>Read Together:</strong> Ephesians 4:15 - "Speaking the truth in love, we will grow to become in every respect the mature body of him who is the head, that is, Christ."</p>
                    
                    <p style="margin-top: 15px;"><strong>Discuss:</strong></p>
                    <ul style="line-height: 1.8; padding-left: 20px;">
                        <li>What makes it hard to be honest sometimes?</li>
                        <li>How can we create a safe space for truth in our family?</li>
                        <li>Share a time when someone's honesty helped you</li>
                    </ul>
                    
                    <p style="margin-top: 15px;"><strong>Activity:</strong> Each person shares one truth about how they're really doing - no advice giving, just listening and thanking them for sharing.</p>
                    
                    <p style="margin-top: 15px;"><strong>Prayer:</strong> "Lord, help us be a family that speaks truth in love. Give us courage to be honest and grace to listen well. Build trust between us. Amen."</p>
                </div>
            </div>

            <button class="btn btn-primary btn-full" onclick="completeDevotional()">
                Mark as Complete
            </button>

            <button class="btn btn-secondary btn-full" onclick="showScreen('familyHome')">
                Back to Family Center
            </button>
        </div>

        <!-- Family Activities Screen -->
        <div class="screen" id="familyActivities">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--accent);">Family Trust-Building Activities</h2>
            
            <div class="action-card family" onclick="showActivityDetail('gratitude')">
                <div class="card-icon">🙏</div>
                <div class="card-title">Gratitude Circle</div>
                <div class="card-description">Each person shares 3 things they're grateful for</div>
            </div>

            <div class="action-card family" onclick="showActivityDetail('memories')">
                <div class="card-icon">📸</div>
                <div class="card-title">Memory Lane</div>
                <div class="card-description">Share favorite family memories together</div>
            </div>

            <div class="action-card family" onclick="showActivityDetail('affirmations')">
                <div class="card-icon">💝</div>
                <div class="card-title">Affirmation Hot Seat</div>
                <div class="card-description">Everyone says something they love about each person</div>
            </div>

            <div class="action-card family" onclick="showActivityDetail('questions')">
                <div class="card-icon">❓</div>
                <div class="card-title">20 Questions</div>
                <div class="card-description">Deep questions to know each other better</div>
            </div>

            <div class="action-card family" onclick="showActivityDetail('service')">
                <div class="card-icon">🤲</div>
                <div class="card-title">Serve Together</div>
                <div class="card-description">Bond through serving others as a family</div>
            </div>

            <button class="btn btn-secondary btn-full" onclick="showScreen('familyHome')">
                Back to Family Center
            </button>
        </div>

        <!-- Family Prayer Screen -->
        <div class="screen" id="familyPrayer">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--accent);">Family Prayer Time</h2>
            
            <div class="prayer-box">
                <div class="prayer-title">Opening Prayer</div>
                <div class="prayer-text">
                    "Heavenly Father, we come before You as a family. Draw us closer to You and to each other. Help us be patient, kind, and understanding. Show us how to love like You love. In Jesus' name, Amen."
                </div>
            </div>

            <div class="devotional-card">
                <h3 style="margin-bottom: 15px;">Prayer Prompts</h3>
                <ul style="line-height: 2; padding-left: 20px;">
                    <li>Each person shares one prayer request</li>
                    <li>Pray for each family member by name</li>
                    <li>Thank God for something about your family</li>
                    <li>Ask God to heal any hurts between you</li>
                    <li>Pray for another family that's struggling</li>
                </ul>
            </div>

            <div class="prayer-box">
                <div class="prayer-title">Closing Blessing</div>
                <div class="prayer-text">
                    "May the Lord bless you and keep you. May He make His face shine upon you and be gracious to you. May He turn His face toward you and give you peace. Numbers 6:24-26"
                </div>
            </div>

            <button class="btn btn-primary btn-full" onclick="savePrayerTime()">
                Save This Prayer Time
            </button>

            <button class="btn btn-secondary btn-full" onclick="showScreen('familyHome')">
                Back to Family Center
            </button>
        </div>

        <!-- Youth Pastors Screen -->
        <div class="screen" id="youthPastors">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Connecting with Youth Pastors</h2>
            
            <div class="guidance-content">
                <h3>What Youth Pastors Offer:</h3>
                <ul style="line-height: 2;">
                    <li>Regular check-ins with your teen</li>
                    <li>Safe adult relationship outside the family</li>
                    <li>Biblical guidance for teen issues</li>
                    <li>Connection to positive peer groups</li>
                    <li>Crisis support and intervention</li>
                    <li>Parent coaching and resources</li>
                </ul>
            </div>

            <div class="guidance-content">
                <h3>How to Connect:</h3>
                <ol style="line-height: 2; padding-left: 20px;">
                    <li>Call local churches and ask about youth programs</li>
                    <li>Attend a youth service with your teen</li>
                    <li>Schedule a meeting with the youth pastor</li>
                    <li>Be honest about your teen's struggles</li>
                    <li>Ask how they handle mental health issues</li>
                    <li>Ensure they have appropriate training/boundaries</li>
                </ol>
            </div>

            <div class="guidance-content">
                <h3>Questions to Ask:</h3>
                <ul style="line-height: 2;">
                    <li>"What's your experience with teen mental health?"</li>
                    <li>"How do you maintain confidentiality?"</li>
                    <li>"When would you involve parents?"</li>
                    <li>"Do you have crisis training?"</li>
                    <li>"How can we work together to support my teen?"</li>
                </ul>
            </div>

            <button class="btn btn-secondary btn-full" onclick="showScreen('resources')">
                Back to Resources
            </button>
        </div>

        <!-- Treatment Programs Screen -->
        <div class="screen" id="treatmentPrograms">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Faith-Based Treatment Programs</h2>
            
            <div class="guidance-content">
                <h3>Types of Programs:</h3>
                <ul style="line-height: 2;">
                    <li><strong>Outpatient Therapy:</strong> Weekly counseling while living at home</li>
                    <li><strong>Intensive Outpatient (IOP):</strong> 3-5 days/week, several hours/day</li>
                    <li><strong>Partial Hospitalization:</strong> Day treatment with evenings at home</li>
                    <li><strong>Residential Treatment:</strong> 24/7 care in therapeutic environment</li>
                    <li><strong>Wilderness Therapy:</strong> Outdoor therapeutic experiences</li>
                    <li><strong>Therapeutic Boarding Schools:</strong> Education + treatment</li>
                </ul>
            </div>

            <div class="guidance-content">
                <h3>Faith-Based Program Options:</h3>
                <ul style="line-height: 2;">
                    <li><strong>Teen Challenge:</strong> Addiction and life-controlling issues</li>
                    <li><strong>Mercy Multiplied:</strong> Free residential program for young women</li>
                    <li><strong>Rapha Treatment Centers:</strong> Christ-centered mental health care</li>
                    <li><strong>Honey Lake Clinic:</strong> Biblical counseling and psychiatry</li>
                    <li><strong>Focus on the Family Intensive:</strong> Family counseling programs</li>
                </ul>
            </div>

            <div class="guidance-content">
                <h3>How to Choose:</h3>
                <ol style="line-height: 2; padding-left: 20px;">
                    <li>Get a professional assessment first</li>
                    <li>Verify accreditation and licensing</li>
                    <li>Ask about integration of faith and treatment</li>
                    <li>Understand the admission process</li>
                    <li>Check insurance coverage</li>
                    <li>Visit the facility if possible</li>
                    <li>Talk to other families who've been through the program</li>
                </ol>
            </div>

            <button class="btn btn-secondary btn-full" onclick="showScreen('resources')">
                Back to Resources
            </button>
        </div>

        <!-- Online Support Screen -->
        <div class="screen" id="onlineSupport">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--primary);">Online Support Resources</h2>
            
            <div class="guidance-content">
                <h3>Virtual Counseling Platforms:</h3>
                <ul style="line-height: 2;">
                    <li><strong>Faithful Counseling:</strong> Christian therapists online</li>
                    <li><strong>BetterHelp Teen:</strong> Specialized teen therapy (13-19)</li>
                    <li><strong>Talkspace:</strong> Text, audio, and video therapy</li>
                    <li><strong>MDLIVE:</strong> Psychiatry and therapy services</li>
                </ul>
            </div>

            <div class="guidance-content">
                <h3>Support Groups & Communities:</h3>
                <ul style="line-height: 2;">
                    <li><strong>The Mighty:</strong> Mental health support community</li>
                    <li><strong>NAMI Teen & Young Adult:</strong> Peer support groups</li>
                    <li><strong>To Write Love on Her Arms:</strong> Depression/addiction support</li>
                    <li><strong>HeartSupport:</strong> Faith-based mental health community</li>
                    <li><strong>Door of Hope 4 Teens:</strong> Online support groups</li>
                </ul>
            </div>

            <div class="guidance-content">
                <h3>Apps for Teen Mental Health:</h3>
                <ul style="line-height: 2;">
                    <li><strong>Calm:</strong> Meditation and sleep stories</li>
                    <li><strong>Headspace for Teens:</strong> Mindfulness exercises</li>
                    <li><strong>Sanvello:</strong> Mood tracking and coping tools</li>
                    <li><strong>notOK:</strong> Crisis support app for teens</li>
                    <li><strong>MindShift:</strong> Anxiety management for teens</li>
                </ul>
            </div>

            <button class="btn btn-secondary btn-full" onclick="showScreen('resources')">
                Back to Resources
            </button>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <button class="nav-item" onclick="navigateHome()">
            <span class="nav-icon">🏠</span>
            <span class="nav-label">Home</span>
        </button>
        <button class="nav-item" onclick="showScreen('emergency')">
            <span class="nav-icon">🚨</span>
            <span class="nav-label">Crisis</span>
        </button>
        <button class="nav-item" onclick="showScreen('resources')">
            <span class="nav-icon">📚</span>
            <span class="nav-label">Resources</span>
        </button>
        <button class="nav-item" onclick="showInfo()">
            <span class="nav-icon">ℹ️</span>
            <span class="nav-label">Info</span>
        </button>
        <button class="nav-item" onclick="showAbout()">
            <span class="nav-icon">❤️</span>
            <span class="nav-label">About</span>
        </button>
    </div>

    <!-- Info Modal -->
    <div class="modal" id="infoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">About Generation Rescue</h2>
                <button class="modal-close" onclick="closeModal('infoModal')">×</button>
            </div>
            
            <div style="margin: 20px 0;">
                <h3 style="color: var(--primary); margin-bottom: 10px;">What is Generation Rescue?</h3>
                <p style="line-height: 1.6;">A family-based biblical app for Christian parents and teens navigating mental health challenges together. Provides prayers, guidance, check-in tools, and community support rooted in Scripture.</p>
            </div>

            <div style="margin: 20px 0;">
                <h3 style="color: var(--primary); margin-bottom: 10px;">How to Use</h3>
                <ul style="line-height: 1.8; padding-left: 20px;">
                    <li>Choose your role: Parent, Teen, or Family</li>
                    <li>Access daily prayers and devotionals</li>
                    <li>Use check-in tools to monitor wellbeing</li>
                    <li>Find biblical guidance for specific issues</li>
                    <li>Connect with community and resources</li>
                </ul>
            </div>

            <div style="margin: 20px 0;">
                <h3 style="color: var(--primary); margin-bottom: 10px;">Installing on Your Phone</h3>
                <p><strong>iPhone:</strong> Tap share button, then "Add to Home Screen"</p>
                <p><strong>Android:</strong> Tap menu (3 dots), then "Add to Home Screen"</p>
            </div>

            <div class="crisis-alert">
                <strong>Crisis Support:</strong>
                If you are in crisis, please contact your local helpline for immediate support.
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal" id="aboutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Depths to Heights</h2>
                <button class="modal-close" onclick="closeModal('aboutModal')">×</button>
            </div>
            
            <div style="margin: 20px 0;">
                <h3 style="color: var(--primary); margin-bottom: 10px;">Our Mission</h3>
                <p style="line-height: 1.6;">Equipping Christian families with biblical tools and support to navigate teen mental health challenges, bringing hope and healing through faith.</p>
            </div>

            <div style="margin: 20px 0;">
                <h3 style="color: var(--primary); margin-bottom: 10px;">Created By</h3>
                <p><strong>Made by Justin</strong><br>
                Depths to Heights<br>
                <a href="https://depthstoheights.org" style="color: var(--primary);">depthstoheights.org</a><br>
                <a href="mailto:depthstoheights@gmail.com" style="color: var(--primary);">depthstoheights@gmail.com</a></p>
            </div>

            <div style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(167, 139, 250, 0.1) 100%); padding: 20px; border-radius: 15px; text-align: center; margin-top: 20px;">
                <h3 style="color: var(--primary);">Support This Work</h3>
                <p>If this app has helped your family, consider supporting Depths to Heights. Your donation helps us create more free tools for families in crisis.</p>
                <button class="btn btn-primary" style="margin-top: 10px;" onclick="window.open('https://www.paypal.com/donate/?hosted_button_id=8GRE7B8C3TP2U', '_blank')">
                    💜 Donate via PayPal
                </button>
            </div>

            <div class="crisis-alert">
                <strong>Remember:</strong>
                You are not alone. God is with you. Help is available.
            </div>
        </div>
    </div>

    <script>
        // Audio Management
        let audioContext;
        let isPlaying = false;
        let userType = null;
        let currentDevotionalDay = 1;
        let familyProgress = 3;

        // Devotional Content Database
        const devotionals = [
            {
                day: 1,
                title: "Building Trust Through Truth",
                verse: "Ephesians 4:15",
                content: "Speaking the truth in love...",
                activity: "Share one truth about how you're doing"
            },
            {
                day: 2,
                title: "Choosing Forgiveness",
                verse: "Colossians 3:13",
                content: "Bear with each other and forgive...",
                activity: "Ask forgiveness for one specific thing"
            },
            {
                day: 3,
                title: "Practicing Patience",
                verse: "James 1:19",
                content: "Be quick to listen, slow to speak...",
                activity: "Listen to each other for 2 minutes without interrupting"
            }
        ];

        // Parent Prayers Database
        const parentPrayers = [
            "Lord, give me wisdom beyond my own understanding. Help me see my teen through Your eyes. Grant me patience when I'm frustrated, love when I'm hurt, and faith when I'm afraid.",
            "Father, I feel overwhelmed today. Remind me that You love my child even more than I do. Guide my words and actions. Help me be the parent You've called me to be.",
            "God, protect my teen's heart and mind today. Surround them with Your love. Give them courage to face their struggles and wisdom to make good choices.",
            "Lord, heal the hurts in our family. Restore what's been broken. Build bridges where there are walls. Help us love each other well.",
            "Father, I surrender my fears about my teen to You. You are in control. Give me peace that passes understanding and faith to trust Your plan."
        ];

        // Initialize Audio
        function initAudio() {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(261.63, audioContext.currentTime); // C4 note
            gainNode.gain.setValueAtTime(0.02, audioContext.currentTime);
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.start();
            isPlaying = true;
        }

        function toggleAudio() {
            const icon = document.getElementById('audioIcon');
            const toggle = document.getElementById('audioToggle');
            
            if (!audioContext) {
                initAudio();
                icon.textContent = '🔊';
                toggle.classList.remove('muted');
            } else if (isPlaying) {
                audioContext.suspend();
                isPlaying = false;
                icon.textContent = '🔇';
                toggle.classList.add('muted');
            } else {
                audioContext.resume();
                isPlaying = true;
                icon.textContent = '🔊';
                toggle.classList.remove('muted');
            }
        }

        // User Management
        function setUser(type) {
            userType = type;
            localStorage.setItem('generationRescueUser', type);
            
            // Load appropriate daily content
            if (type === 'parent') {
                loadDailyParentPrayer();
            }
            
            playClickSound();
        }

        // Load Daily Parent Prayer
        function loadDailyParentPrayer() {
            const today = new Date().getDay();
            const prayerIndex = today % parentPrayers.length;
            const prayerBox = document.querySelector('#dailyPrayerParent .prayer-text');
            if (prayerBox) {
                prayerBox.textContent = parentPrayers[prayerIndex];
            }
        }

        // Navigation
        function showScreen(screenId) {
            playClickSound();
            
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            setTimeout(() => {
                const screen = document.getElementById(screenId);
                if (screen) {
                    screen.classList.add('active');
                    window.scrollTo(0, 0);
                }
            }, 100);
        }

        function navigateHome() {
            if (userType === 'parent') {
                showScreen('parentHome');
            } else if (userType === 'teen') {
                showScreen('teenHome');
            } else if (userType === 'family') {
                showScreen('familyHome');
            } else {
                showScreen('userSelect');
            }
        }

        // Mood Selection
        function selectMood(mood, element) {
            document.querySelectorAll('.mood-card').forEach(card => {
                card.classList.remove('selected');
            });
            element.classList.add('selected');
            
            const today = new Date().toDateString();
            localStorage.setItem('teenMood_' + today, mood);
            
            // Create mood response in the existing devotional card
            const devotionalCard = document.querySelector('#teenHome .devotional-card');
            let responseHTML = '';
            
            if (mood === 'help') {
                responseHTML = `
                    <div class="devotional-header">
                        <div class="devotional-day">🆘</div>
                        <div class="devotional-title">
                            <h3>Let's Get You Help</h3>
                            <p>You're brave for reaching out</p>
                        </div>
                    </div>
                    <div class="devotional-content">
                        <p>It takes courage to ask for help. You're not alone, and things can get better.</p>
                        <button class="btn btn-warning" style="margin-top: 10px;" onclick="showScreen('emergency')">
                            See Crisis Resources Now
                        </button>
                    </div>
                `;
            } else if (mood === 'struggling') {
                responseHTML = `
                    <div class="devotional-header">
                        <div class="devotional-day">💛</div>
                        <div class="devotional-title">
                            <h3>It's Okay to Struggle</h3>
                            <p>You are loved and valued</p>
                        </div>
                    </div>
                    <div class="devotional-content">
                        <p>Hard days don't last forever. Consider talking to someone you trust today. God sees you and loves you right where you are.</p>
                        <button class="btn btn-primary" style="margin-top: 10px;" onclick="showScreen('teenTalk')">
                            Find Someone to Talk To
                        </button>
                    </div>
                `;
            } else if (mood === 'great') {
                responseHTML = `
                    <div class="devotional-header">
                        <div class="devotional-day">🎉</div>
                        <div class="devotional-title">
                            <h3>That's Wonderful!</h3>
                            <p>Celebrate the good days</p>
                        </div>
                    </div>
                    <div class="devotional-content">
                        <p>Thank God for the good days - they're gifts! Remember this feeling when harder days come. You are capable of joy!</p>
                    </div>
                `;
            } else if (mood === 'okay') {
                responseHTML = `
                    <div class="devotional-header">
                        <div class="devotional-day">👍</div>
                        <div class="devotional-title">
                            <h3>Okay Is Okay</h3>
                            <p>Not every day has to be amazing</p>
                        </div>
                    </div>
                    <div class="devotional-content">
                        <p>It's perfectly fine to have "okay" days. You don't have to be great all the time. God loves you on your ordinary days too.</p>
                    </div>
                `;
            }
            
            if (responseHTML) {
                devotionalCard.innerHTML = responseHTML;
            }
            
            playClickSound();
        }

        // Show Guidance Detail
        function showGuidanceDetail(topic) {
            const guidanceContent = {
                anxiety: {
                    title: "Teen Anxiety",
                    scripture: "Cast all your anxiety on Him because He cares for you. - 1 Peter 5:7",
                    tips: [
                        "Pray together daily about specific worries",
                        "Create a 'worry box' where they can place written concerns",
                        "Practice breathing prayers: 'Lord, give peace'",
                        "Limit social media and news exposure",
                        "Encourage physical activity and outdoor time",
                        "Establish consistent sleep routines",
                        "Consider professional Christian counseling"
                    ],
                    prayer: "Lord, calm the storm in my teen's mind. Replace anxiety with Your perfect peace. Help them trust You with their fears. Give me wisdom to support them well. In Jesus' name, Amen."
                },
                depression: {
                    title: "Teen Depression",
                    scripture: "The Lord is close to the brokenhearted and saves those who are crushed in spirit. - Psalm 34:18",
                    tips: [
                        "Don't minimize their feelings - validate them",
                        "Maintain routines but be flexible",
                        "Encourage small, achievable goals",
                        "Seek professional Christian counseling",
                        "Remind them: This is a season, not a sentence",
                        "Watch for warning signs of self-harm",
                        "Create moments of joy without forcing happiness"
                    ],
                    prayer: "Father, lift my teen from this valley. Shine Your light into their darkness. Remind them of their worth and purpose. Use this struggle for their growth and Your glory. Amen."
                },
                selfharm: {
                    title: "Self-Harm",
                    scripture: "You are the temple of God and the Spirit of God dwells in you. - 1 Corinthians 3:16",
                    tips: [
                        "React with love, not anger or shock",
                        "Remove means of harm without shaming",
                        "Seek immediate professional help",
                        "Explore underlying pain together",
                        "Provide alternative coping strategies",
                        "Increase supervision without being intrusive",
                        "Address any trauma or abuse"
                    ],
                    prayer: "God, heal the pain that drives my teen to hurt themselves. Show them healthy ways to cope. Protect their body, Your temple. Give me courage to get the help we need. Amen."
                },
                rebellion: {
                    title: "Rebellion & Anger",
                    scripture: "Fathers, do not provoke your children to anger, but bring them up in the discipline and instruction of the Lord. - Ephesians 6:4",
                    tips: [
                        "Set clear, consistent boundaries",
                        "Choose battles wisely",
                        "Listen more than you lecture",
                        "Model the behavior you want to see",
                        "Pray for wisdom and patience daily",
                        "Look for underlying hurt or fear",
                        "Maintain relationship over rules when possible"
                    ],
                    prayer: "Lord, soften both our hearts. Help me see past the rebellion to the pain beneath. Give me wisdom to know when to stand firm and when to show grace. Restore our relationship. Amen."
                },
                addiction: {
                    title: "Addiction Issues",
                    scripture: "So if the Son sets you free, you will be free indeed. - John 8:36",
                    tips: [
                        "Address with love, not condemnation",
                        "Seek professional addiction counseling",
                        "Consider faith-based recovery programs",
                        "Create accountability with grace",
                        "Celebrate small victories",
                        "Address underlying trauma or pain",
                        "Involve trusted community support"
                    ],
                    prayer: "Jesus, break the chains of addiction in my teen's life. Replace their craving with hunger for You. Give us strength for this battle. Bring freedom and restoration. Amen."
                }
            };

            const guidance = guidanceContent[topic];
            if (guidance) {
                document.getElementById('guidanceTitle').textContent = guidance.title;
                document.getElementById('guidanceScripture').textContent = guidance.scripture;
                
                const tipsList = document.getElementById('guidanceTips');
                tipsList.innerHTML = '';
                guidance.tips.forEach(tip => {
                    const li = document.createElement('li');
                    li.textContent = tip;
                    tipsList.appendChild(li);
                });
                
                document.getElementById('guidancePrayer').textContent = guidance.prayer;
                showScreen('guidanceDetail');
            }
        }

        // Activity Details - Changed from alert to modal
        function showActivityDetail(activity) {
            const activities = {
                gratitude: {
                    title: "Gratitude Circle",
                    content: "Sit in a circle. Each person shares 3 things they're grateful for about each family member. No one can repeat what's been said. Watch hearts soften as you focus on the good in each other!"
                },
                memories: {
                    title: "Memory Lane", 
                    content: "Look through old photos together. Each person picks one and shares why it's special. Laugh about the funny ones. Remember God's faithfulness through the years. This builds connection through shared history."
                },
                affirmations: {
                    title: "Affirmation Hot Seat",
                    content: "One person sits in the 'hot seat' while everyone else says one thing they love or admire about them. No deflecting compliments - just receive! This builds self-worth and family bonds."
                },
                questions: {
                    title: "20 Questions",
                    content: "Take turns asking deep questions like 'What's your biggest dream?' or 'When do you feel most loved?' or 'What's your favorite family memory?' Really listen to the answers without judgment."
                },
                service: {
                    title: "Serve Together",
                    content: "Choose a service project - serve at a food bank, visit nursing home, help a neighbor, or do yard work for someone in need. Working together for others bonds your hearts and gives perspective."
                }
            };
            
            const activityData = activities[activity];
            if (activityData) {
                // Create and show activity detail in guidance detail screen
                document.getElementById('guidanceTitle').textContent = activityData.title;
                document.getElementById('guidanceScripture').textContent = "Love one another deeply, from the heart. - 1 Peter 1:22";
                
                const tipsList = document.getElementById('guidanceTips');
                tipsList.innerHTML = `<li>${activityData.content}</li>`;
                
                document.getElementById('guidancePrayer').textContent = "Lord, use this activity to draw our family closer to You and to each other. Break down walls and build bridges of love. Amen.";
                showScreen('guidanceDetail');
            }
        }

        // Assessment Tool
        function calculateAssessment() {
            let score = 0;
            for (let i = 1; i <= 8; i++) {
                if (document.getElementById('assess' + i).checked) {
                    score++;
                    if (i === 8) score += 2; // Talking about death weighted heavier
                }
            }
            
            const resultsDiv = document.getElementById('assessmentResults');
            const message = document.getElementById('assessmentMessage');
            const alert = document.getElementById('assessmentAlert');
            
            if (score >= 6) {
                alert.style.background = 'linear-gradient(135deg, #ef4444 0%, #f87171 100%)';
                message.textContent = 'Your teen needs immediate professional help. Please contact a counselor or crisis line today.';
            } else if (score >= 3) {
                alert.style.background = 'linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%)';
                message.textContent = 'Your teen is showing concerning signs. Consider scheduling an appointment with a counselor.';
            } else {
                alert.style.background = 'linear-gradient(135deg, #10b981 0%, #34d399 100%)';
                message.textContent = 'Continue monitoring and maintaining open communication. Use the check-in tools regularly.';
            }
            
            resultsDiv.style.display = 'block';
        }

        // Community Functions
        function prayForPost() {
            const btn = event.target;
            btn.innerHTML = '🙏 Praying';
            btn.style.color = 'var(--primary)';
            btn.disabled = true;
        }

        function commentOnPost() {
            // Show comment input inline
            const postDiv = event.target.closest('.community-post');
            const existingComment = postDiv.querySelector('.comment-input');
            
            if (!existingComment) {
                const commentDiv = document.createElement('div');
                commentDiv.className = 'comment-input';
                commentDiv.style.marginTop = '15px';
                commentDiv.innerHTML = `
                    <input type="text" class="input-field" placeholder="Share an encouraging word..." />
                    <button class="btn btn-primary" style="margin-top: 10px;" onclick="submitComment(this)">
                        Send Encouragement
                    </button>
                `;
                postDiv.appendChild(commentDiv);
            }
        }

        function submitComment(btn) {
            const input = btn.previousElementSibling;
            if (input.value) {
                const commentDiv = btn.parentElement;
                commentDiv.innerHTML = `
                    <div style="background: #f0f7ff; padding: 10px; border-radius: 10px; margin-top: 10px;">
                        <strong>Your comment:</strong> ${input.value}
                    </div>
                `;
            }
        }

        function supportPost() {
            const btn = event.target;
            btn.innerHTML = '❤️ Supported';
            btn.style.color = 'var(--danger)';
            btn.disabled = true;
        }

        function showNewPost() {
            // Create inline post form instead of prompt
            const communityDiv = document.getElementById('community');
            const existingForm = communityDiv.querySelector('.new-post-form');
            
            if (!existingForm) {
                const formDiv = document.createElement('div');
                formDiv.className = 'new-post-form guidance-content';
                formDiv.innerHTML = `
                    <h3>Share Your Story</h3>
                    <textarea class="input-field" rows="4" placeholder="Share your story or prayer request..."></textarea>
                    <button class="btn btn-primary" onclick="submitNewPost(this)">Share with Community</button>
                    <button class="btn btn-secondary" onclick="cancelNewPost(this)">Cancel</button>
                `;
                
                // Insert after the header
                const header = communityDiv.querySelector('h2');
                header.after(formDiv);
            }
        }

        function submitNewPost(btn) {
            const textarea = btn.parentElement.querySelector('textarea');
            if (textarea.value) {
                // Create new post element
                const newPost = document.createElement('div');
                newPost.className = 'community-post';
                newPost.innerHTML = `
                    <div class="post-header">
                        <div class="post-avatar" style="background: var(--gradient3);">ME</div>
                        <div class="post-info">
                            <div class="post-name">You</div>
                            <div class="post-time">Just now</div>
                        </div>
                    </div>
                    <div class="post-content">${textarea.value}</div>
                    <div class="post-actions">
                        <button class="post-action" onclick="prayForPost()">🙏 Pray</button>
                        <button class="post-action" onclick="commentOnPost()">💬 Comment</button>
                        <button class="post-action" onclick="supportPost()">❤️ Support</button>
                    </div>
                `;
                
                // Insert after form
                const form = btn.parentElement;
                form.after(newPost);
                
                // Save to localStorage
                const posts = JSON.parse(localStorage.getItem('communityPosts') || '[]');
                posts.push({
                    content: textarea.value,
                    date: new Date().toISOString(),
                    author: 'You'
                });
                localStorage.setItem('communityPosts', JSON.stringify(posts));
                
                // Remove form
                form.remove();
            }
        }

        function cancelNewPost(btn) {
            btn.parentElement.remove();
        }

        // Devotional Functions
        function completeDevotional() {
            currentDevotionalDay++;
            familyProgress = Math.min(100, (currentDevotionalDay / 30) * 100);
            
            document.getElementById('devotionalDay').textContent = currentDevotionalDay;
            document.getElementById('progressPercent').textContent = Math.round(familyProgress) + '%';
            document.getElementById('progressBar').style.width = familyProgress + '%';
            
            localStorage.setItem('devotionalProgress', currentDevotionalDay);
            
            // Show completion message inline
            const devotionalScreen = document.getElementById('familyDevotional');
            const completionDiv = document.createElement('div');
            completionDiv.className = 'prayer-box';
            completionDiv.innerHTML = `
                <div class="prayer-title">✅ Day ${currentDevotionalDay - 1} Complete!</div>
                <div class="prayer-text">Great job completing today's devotional! See you tomorrow for Day ${currentDevotionalDay}.</div>
            `;
            
            // Insert before buttons
            const firstButton = devotionalScreen.querySelector('.btn');
            firstButton.parentElement.insertBefore(completionDiv, firstButton);
            
            // Auto-return after 2 seconds
            setTimeout(() => {
                showScreen('familyHome');
            }, 2000);
        }

        function savePrayerTime() {
            const today = new Date().toDateString();
            localStorage.setItem('familyPrayer_' + today, 'completed');
            
            // Show saved message inline
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = '✅ Prayer Time Saved!';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.disabled = false;
            }, 2000);
        }

        // Modal Functions
        function showInfo() {
            document.getElementById('infoModal').classList.add('active');
        }

        function showAbout() {
            document.getElementById('aboutModal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Sound Effects
        function playClickSound() {
            if (!audioContext || !isPlaying) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
            gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Load saved user type
            const savedUser = localStorage.getItem('generationRescueUser');
            if (savedUser) {
                userType = savedUser;
            }
            
            // Load devotional progress
            const savedProgress = localStorage.getItem('devotionalProgress');
            if (savedProgress) {
                currentDevotionalDay = parseInt(savedProgress);
                familyProgress = Math.min(100, (currentDevotionalDay / 30) * 100);
                
                if (document.getElementById('devotionalDay')) {
                    document.getElementById('devotionalDay').textContent = currentDevotionalDay;
                    document.getElementById('progressPercent').textContent = Math.round(familyProgress) + '%';
                    document.getElementById('progressBar').style.width = familyProgress + '%';
                }
            }
            
            // Load daily parent prayer
            loadDailyParentPrayer();
        });

        // Modal background click to close
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>
